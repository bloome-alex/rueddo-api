(function(){var e={386:function(e,t,s){"use strict";var r=s(144),a=s(1096),n=s(677),i=s(8983),o=s(5057),l=s(3551),u=s(5234),d=function(){var e=this,t=e._self._c;return t(a.Z,[t(n.Z,{attrs:{app:"",color:"primary",dark:"","clipped-left":""}},[e.user?t(i.Z,{on:{click:function(t){e.menuDrawerState=!0}}}):e._e(),t(u.Z),t("b",{staticClass:"text-h4"},[e._v("BACKOFFICE")]),t(u.Z),t(o.Z,[e._v("person")])],1),t(l.Z,[t("router-view")],1),e.user?t("menu-drawer",{attrs:{value:e.menuDrawerState},on:{"set-drawer":e.setMenuDrawerState}}):e._e()],1)},c=[],m=(s(7658),s(1828)),p=s(8714),h=s(6487),f=s(1911),g=s(1133),v=s(7135),Z=s(9042),_=function(){var e=this,t=e._self._c;return t(v.Z,{directives:[{def:Z.Z,name:"click-outside",rawName:"v-click-outside",value:e.clickOutside,expression:"clickOutside"}],staticClass:"py-4",attrs:{app:"",left:"",width:"300"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t(g.Z,[t(p.Z,{staticClass:"ma-0 pa-0"},[t(m.Z,{staticClass:"button-text",attrs:{width:"100%",plain:"",to:"/"}},[e._v("Inicio")]),t(f.Z,[e._v("Administración")]),t(h.Z,e._l(e.managementMenus,(function(s,r){return t(m.Z,{key:r,staticClass:"button-text",attrs:{block:"",plain:"",to:s.link}},[t(o.Z,{attrs:{left:""}},[e._v("settings")]),e._v(" "+e._s(s.text)+" ")],1)})),1)],1)],1)],1)},w=[],y={name:"MenuDrawer",data(){return{clickOutsideState:!0,managementMenus:[{link:"user-management",text:"Administración de usuarios"},{link:"travel-management",text:"Administración de viajes"}]}},props:{value:{type:Boolean,required:!0}},computed:{drawer:{get(){return this.value},set(e){this.$emit("set-drawer",e)}}},methods:{clickOutside(){this.clickOutsideState=!this.clickOutsideState,this.clickOutsideState&&this.drawer&&(this.clickOutsideState=!0,this.drawer=!1)}}},b=y,k=s(1001),D=(0,k.Z)(b,_,w,!1,null,"6ff2a8ee",null),x=D.exports,O={name:"App",components:{MenuDrawer:x},data(){return{menuDrawerState:!1}},computed:{user(){return this.$store.state.user==this.$store.state.root.user&&this.$store.state.password==this.$store.state.root.password}},created(){this.user?"/"!=this.$router.currentRoute.path&&this.$router.push("/"):"/login-user"!=this.$router.currentRoute.path&&this.$router.push("/login-user")},methods:{setMenuDrawerState(e){this.menuDrawerState=e}}},U=O,C=(0,k.Z)(U,d,c,!1,null,null,null),T=C.exports,E=s(7152);function S(){const e=s(2796),t={};return e.keys().forEach((s=>{const r=s.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){const a=r[1];t[a]=e(s)}})),t}r.ZP.use(E.Z);var P=new E.Z({locale:"es",fallbackLocale:"es",messages:S()}),M=s(8345),L=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",[e._v("home")])},$=[],j=s(2484),A=s.n(j),B=A(),I=(0,k.Z)(B,L,$,!1,null,null,null),N=I.exports,q=s(3058),R=s(5223),F=s(4437),z=s(6035),G=s(9820),J=s(5294),K=s(4470),H=function(){var e=this,t=e._self._c;return t(z.Z,{staticClass:"py-8"},[t(q.Z,{attrs:{loading:e.loadingCard}},[t(J.Z,[t(F.Z,{attrs:{cols:"6"}},[t(R.EB,[e._v("Administración de usuarios")])],1),t(F.Z,{attrs:{offset:"3",cols:"3"}},[t(R.EB,[t(m.Z,{attrs:{color:"success",loading:e.updateUsersLoading},on:{click:e.updateUsers}},[e._v("Guardar cambios")])],1)],1)],1),t(G.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"items-per-page":12},scopedSlots:e._u([{key:"item.state",fn:function({item:s}){return[t(K.Z,{attrs:{color:"green"},on:{click:function(t){return e.driverEnabledChanged(s)}},model:{value:s.state,callback:function(t){e.$set(s,"state",t)},expression:"item.state"}})]}},{key:"item.actions",fn:function({item:s}){return[t(m.Z,{attrs:{icon:""},on:{click:function(t){return e.moreInfo(s)}}},[t(o.Z,{attrs:{color:"blue"}},[e._v("search")])],1),t(m.Z,{attrs:{icon:""},on:{click:function(t){return e.editUser(s)}}},[t(o.Z,{attrs:{color:"green"}},[e._v("edit")])],1),t(m.Z,{attrs:{icon:""},on:{click:function(t){return e.deleteUser(s)}}},[t(o.Z,{attrs:{color:"red"}},[e._v("delete")])],1)]}}],null,!0)})],1)],1)},Q=[],V=s(8945);class W{constructor(){this.url="",this.apiRoute="/api",this.route=this.url+this.apiRoute}async fetchUsers(){const e=this.route+"/fetch-users";try{const{data:{users:t}}=await V.Z.get(e);return t}catch(t){throw new Error(t)}}async fetchTravels(){const e=this.route+"/fetch-travels";try{const{data:{travels:t}}=await V.Z.get(e);return t}catch(t){throw new Error(t)}}async updateUser({id:e,email:t,role:s,name:r,surname:a,address:n,state:i}){const o=this.route+"/update-user";try{const{data:{user:l}}=await V.Z.post(o,{id:e,email:t,role:s,name:r,surname:a,address:n,state:i});return l}catch(l){throw new Error(l)}}}var X=new W,Y={name:"UserManagement-Page",data(){return{updateUsersLoading:!1,usersToUpdate:[],loadingCard:!1,headers:[{text:"Email",value:"email",align:"center"},{text:"Role",value:"role",align:"center"},{text:"Nombre",value:"name",align:"center"},{text:"Apellido",value:"surname",align:"center"},{text:"Dirección",value:"address",align:"center"},{text:"Conductor habilitado",value:"state",align:"center"},{text:"Acciones",value:"actions",align:"center"}],items:[]}},async mounted(){this.loadingCard=!0;try{const e=await X.fetchUsers();e.forEach((e=>{this.items.push({id:e._id,email:e.email?e.email:"",role:e.role?e.role:"",name:"CLIENT"==e.role?e.clientDetails.name:e.driverDetails.name,surname:"CLIENT"==e.role?e.clientDetails.surname:e.driverDetails.surname,address:"CLIENT"==e.role?e.clientDetails.address:e.driverDetails.address,state:!!e.driverEnabled&&e.driverEnabled,details:"CLIENT "==e.role?e.clientDetails:e.driverDetails})}))}catch(e){console.log("error: ",e)}this.loadingCard=!1},methods:{async updateUsers(){this.updateUsersLoading=!0;for(let e=0;e<this.usersToUpdate.length;e++){const{id:t,email:s,role:r,name:a,surname:n,address:i,state:o}=this.usersToUpdate[e];await X.updateUser({id:t,email:s,role:r,name:a,surname:n,address:i,state:o})}this.existUser=!1,this.usersToUpdate=[],this.updateUsersLoading=!1},driverEnabledChanged({id:e,email:t,role:s,name:r,surname:a,address:n,state:i}){let o=!1;this.usersToUpdate.forEach((async(l,u)=>{l.id===e&&(this.usersToUpdate[u]={id:e,email:t,role:s,name:r,surname:a,address:n,state:i},o=!0)})),o||this.usersToUpdate.push({id:e,email:t,role:s,name:r,surname:a,address:n,state:i})},editUser(){},deleteUser(){}}},ee=Y,te=(0,k.Z)(ee,H,Q,!1,null,null,null),se=te.exports,re=function(){var e=this,t=e._self._c;return t(z.Z,{staticClass:"py-8"},[t(q.Z,{attrs:{loading:e.loadingCard}},[t(J.Z,[t(F.Z,{attrs:{cols:"6"}},[t(R.EB,[e._v("Administración de viajes")])],1)],1),t(G.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"items-per-page":5},scopedSlots:e._u([{key:"item.origin",fn:function({item:s}){return[t(m.Z,{attrs:{block:"",color:"primary"},on:{click:function(t){return e.OpenOriginDetails(s.origin)}}},[t(o.Z,{attrs:{left:""}},[e._v("add")]),e._v(" info ")],1)]}},{key:"item.destinations",fn:function({item:s}){return[t(m.Z,{attrs:{block:"",color:"primary"},on:{click:function(t){return e.OpenDestinationsDetails(s.destinations)}}},[t(o.Z,{attrs:{left:""}},[e._v("add")]),e._v(" info ")],1)]}}],null,!0)})],1),t("origin-details",{attrs:{origin:e.originSelectionedDetails},model:{value:e.originDetails,callback:function(t){e.originDetails=t},expression:"originDetails"}}),t("destinations-details",{attrs:{destinations:e.desinationsSelectedDetails},model:{value:e.destinationsDetails,callback:function(t){e.destinationsDetails=t},expression:"destinationsDetails"}})],1)},ae=[],ne=s(9789),ie=s(4192),oe=function(){var e=this,t=e._self._c;return t(ne.Z,{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(q.Z,{attrs:{outlined:""}},[t(R.EB,[e._v("Detalles del Origen")]),t(R.ZB,[t(ie.Z),t(o.Z,{attrs:{left:""}},[e._v("home")]),e._v(" Dirección: "+e._s(e.origin.address)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("stairs")]),e._v(" Piso: "+e._s(e.origin.floor)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("comment")]),e._v(" Mensaje Opcional: "+e._s(e.origin.optionalMessage)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("contact_mail")]),e._v(" Contacto: "+e._s(e.origin.contact)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("contact_phone")]),e._v(" Telefono celular: "+e._s(e.origin.phone)+" "),t("br")],1),t(ie.Z),t(R.h7,[t(m.Z,{attrs:{block:"",color:"primary"},on:{click:function(t){e.dialog=!e.dialog}}},[e._v(" Aceptar ")])],1)],1)],1)},le=[],ue={name:"OriginDetails",props:{value:{type:Boolean,required:!0},origin:{type:Object,required:!0}},computed:{dialog:{get(){return this.value},set(e){this.$emit("input",e)}}}},de=ue,ce=(0,k.Z)(de,oe,le,!1,null,null,null),me=ce.exports,pe=function(){var e=this,t=e._self._c;return t(ne.Z,{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(q.Z,{attrs:{outlined:""}},[t(R.EB,[e._v("Detalles del Origen")]),t(R.ZB,[t(ie.Z),t(g.Z,e._l(e.destinations,(function(s,r){return t(p.Z,{key:r},[t(f.Z,[e._v("Destino "+e._s(r+1))]),t(h.Z,[t(o.Z,{attrs:{left:""}},[e._v("home")]),e._v(" Dirección: "+e._s(s.address)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("stairs")]),e._v(" Piso: "+e._s(s.floor)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("comment")]),e._v(" Mensaje Opcional: "+e._s(s.optionalMessage)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("contact_mail")]),e._v(" Contacto: "+e._s(s.contact)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("contact_phone")]),e._v(" Telefono celular: "+e._s(s.phone)+" "),t("br")],1)],1)})),1)],1),t(ie.Z),t(R.h7,[t(m.Z,{attrs:{block:"",color:"primary"},on:{click:function(t){e.dialog=!e.dialog}}},[e._v(" Aceptar ")])],1)],1)],1)},he=[],fe={name:"OriginDetails",props:{value:{type:Boolean,required:!0},destinations:{type:Array,required:!0}},computed:{dialog:{get(){return this.value},set(e){this.$emit("input",e)}}}},ge=fe,ve=(0,k.Z)(ge,pe,he,!1,null,null,null),Ze=ve.exports,_e={name:"UserManagement-Page",components:{OriginDetails:me,DestinationsDetails:Ze},data(){return{destinationsDetails:!1,desinationsSelectedDetails:[],originDetails:!1,originSelectionedDetails:{},updateUsersLoading:!1,usersToUpdate:[],loadingCard:!1,headers:[{text:"Cliente",value:"designedClient",align:"center"},{text:"Conductor",value:"designedDriver",align:"center"},{text:"Origen",value:"origin",align:"center"},{text:"Destinos",value:"destinations",align:"center"},{text:"Metodo de pago",value:"methodOfPay",align:"center"},{text:"Tipo de vehículo",value:"vehicle",align:"center"},{text:"Estado",value:"status",align:"center"}],items:[]}},async mounted(){this.loadingCard=!0;try{const e=await X.fetchTravels();console.log("travels: ",e),this.items=e.map((e=>e))}catch(e){console.log("error: ",e)}this.loadingCard=!1},methods:{async OpenDestinationsDetails(e){this.desinationsSelectedDetails=e,this.destinationsDetails=!0},async OpenOriginDetails(e){this.originSelectionedDetails=e,this.originDetails=!0},async updateUsers(){this.updateUsersLoading=!0;for(let e=0;e<this.usersToUpdate.length;e++){const{id:t,email:s,role:r,name:a,surname:n,address:i,state:o}=this.usersToUpdate[e];await X.updateUser({id:t,email:s,role:r,name:a,surname:n,address:i,state:o})}this.existUser=!1,this.usersToUpdate=[],this.updateUsersLoading=!1},driverEnabledChanged({id:e,email:t,role:s,name:r,surname:a,address:n,state:i}){let o=!1;this.usersToUpdate.forEach((async(l,u)=>{l.id===e&&(this.usersToUpdate[u]={id:e,email:t,role:s,name:r,surname:a,address:n,state:i},o=!0)})),o||this.usersToUpdate.push({id:e,email:t,role:s,name:r,surname:a,address:n,state:i})},editUser(){},deleteUser(){}}},we=_e,ye=(0,k.Z)(we,re,ae,!1,null,null,null),be=ye.exports,ke=s(5251),De=function(){var e=this,t=e._self._c;return t(z.Z,[t(q.Z,[t(R.EB,[e._v("Sign-in")]),t(ie.Z),t(R.ZB,[t(ke.Z,{attrs:{label:"username"},on:{keydown:e.keydown},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t(ke.Z,{attrs:{type:"password",label:"password"},on:{keydown:e.keydown},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t(R.h7,[t(m.Z,{attrs:{loading:e.buttonLoading,block:"",color:"primary"},on:{click:e.loginUser}},[e._v("Iniciar Sesión")])],1)],1)],1)],1)},xe=[],Oe=s(629),Ue={name:"login-user",data(){return{username:"",password:"",buttonLoading:!1}},methods:{...(0,Oe.OI)(["login"]),keydown({key:e}){"Enter"===e&&this.loginUser()},loginUser(){this.buttonLoading=!0,setTimeout((()=>{this.login({username:this.username,password:this.password}),this.username==this.$store.state.user&&this.$store.state.password==this.password&&this.$router.push("/"),this.buttonLoading=!1}),1500)}}},Ce=Ue,Te=(0,k.Z)(Ce,De,xe,!1,null,null,null),Ee=Te.exports;r.ZP.use(M.ZP);const Se=[{path:"/",name:"home",component:N},{path:"/user-management",name:"userManagement",component:se},{path:"/travel-management",name:"travel-management",component:be},{path:"/login-user",name:"login-user",component:Ee}],Pe=new M.ZP({mode:"history",base:"/",routes:Se});var Me=Pe,Le=s(2250);r.ZP.use(Le.Z);var $e=new Le.Z({}),je=s(3931),Ae=s.n(je);r.ZP.use(Oe.ZP);var Be=new Oe.ZP.Store({state:{root:{user:"admin-rueddo",password:"ru3ddo*01"},user:"",password:""},getters:{},mutations:{login(e,{username:t,password:s}){e.user=t,e.password=s}},actions:{},modules:{},plugins:[Ae()({keys:["user","password"]})]});r.ZP.config.productionTip=!1,new r.ZP({i18n:P,router:Me,vuetify:$e,store:Be,render:e=>e(T)}).$mount("#app")},2484:function(){},2796:function(e,t,s){var r={"./es.json":8563};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=n,e.exports=a,a.id=2796},8563:function(e){"use strict";e.exports=JSON.parse('{"message":"hello i18n !!"}')}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,r,a,n){if(!r){var i=1/0;for(d=0;d<e.length;d++){r=e[d][0],a=e[d][1],n=e[d][2];for(var o=!0,l=0;l<r.length;l++)(!1&n||i>=n)&&Object.keys(s.O).every((function(e){return s.O[e](r[l])}))?r.splice(l--,1):(o=!1,n<i&&(i=n));if(o){e.splice(d--,1);var u=a();void 0!==u&&(t=u)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[r,a,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,n,i=r[0],o=r[1],l=r[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(l)var d=l(s)}for(t&&t(r);u<i.length;u++)n=i[u],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(386)}));r=s.O(r)})();
//# sourceMappingURL=app.750b977a.js.map