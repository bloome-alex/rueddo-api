(function(){var e={1364:function(e,t,a){"use strict";var n=a(144),s=a(1096),r=a(677),i=a(8983),o=a(5057),l=a(3551),c=a(5234),u=function(){var e=this,t=e._self._c;return t(s.Z,[t(r.Z,{attrs:{app:"",color:"primary",dark:"","clipped-left":""}},[t(i.Z,{on:{click:function(t){e.menuDrawerState=!0}}}),t(c.Z),t("b",{staticClass:"text-h4"},[e._v("BACKOFFICE")]),t(c.Z),t(o.Z,[e._v("person")])],1),t(l.Z,[t("router-view")],1),t("menu-drawer",{attrs:{value:e.menuDrawerState},on:{"set-drawer":e.setMenuDrawerState}})],1)},d=[],m=a(1828),p=a(8714),f=a(6487),v=a(1911),h=a(1133),g=a(7135),Z=a(9042),_=function(){var e=this,t=e._self._c;return t(g.Z,{directives:[{def:Z.Z,name:"click-outside",rawName:"v-click-outside",value:e.clickOutside,expression:"clickOutside"}],staticClass:"py-4",attrs:{app:"",left:"",width:"300"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t(h.Z,[t(p.Z,{staticClass:"ma-0 pa-0"},[t(m.Z,{staticClass:"button-text",attrs:{width:"100%",plain:"",to:"/"}},[e._v("Inicio")]),t(v.Z,[e._v("Administración")]),t(f.Z,e._l(e.managementMenus,(function(a,n){return t(m.Z,{key:n,staticClass:"button-text",attrs:{block:"",plain:"",to:a.link}},[t(o.Z,{attrs:{left:""}},[e._v("settings")]),e._v(" "+e._s(a.text)+" ")],1)})),1)],1)],1)],1)},y=[],b={name:"MenuDrawer",data(){return{clickOutsideState:!0,managementMenus:[{link:"user-management",text:"Administración de usuarios"},{link:"travel-management",text:"Administración de viajes"}]}},props:{value:{type:Boolean,required:!0}},computed:{drawer:{get(){return this.value},set(e){this.$emit("set-drawer",e)}}},methods:{clickOutside(){this.clickOutsideState=!this.clickOutsideState,this.clickOutsideState&&this.drawer&&(this.clickOutsideState=!0,this.drawer=!1)}}},D=b,w=a(1001),k=(0,w.Z)(D,_,y,!1,null,"6ff2a8ee",null),x=k.exports,O={name:"App",components:{MenuDrawer:x},data(){return{menuDrawerState:!1}},methods:{setMenuDrawerState(e){this.menuDrawerState=e}}},U=O,C=(0,w.Z)(U,u,d,!1,null,null,null),T=C.exports,E=a(7152);function S(){const e=a(2796),t={};return e.keys().forEach((a=>{const n=a.match(/([A-Za-z0-9-_]+)\./i);if(n&&n.length>1){const s=n[1];t[s]=e(a)}})),t}n.ZP.use(E.Z);var P=new E.Z({locale:"es",fallbackLocale:"es",messages:S()}),M=a(8345),j=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",[e._v("home")])},A=[],L=a(2484),B=a.n(L),N=B(),I=(0,w.Z)(N,j,A,!1,null,null,null),q=I.exports,$=a(3058),F=a(5223),R=a(4437),z=a(6035),G=a(8286),J=a(5294),K=a(4470),H=function(){var e=this,t=e._self._c;return t(z.Z,{staticClass:"py-8"},[t($.Z,{attrs:{loading:e.loadingCard}},[t(J.Z,[t(R.Z,{attrs:{cols:"6"}},[t(F.EB,[e._v("Administración de usuarios")])],1),t(R.Z,{attrs:{offset:"3",cols:"3"}},[t(F.EB,[t(m.Z,{attrs:{color:"success",loading:e.updateUsersLoading},on:{click:e.updateUsers}},[e._v("Guardar cambios")])],1)],1)],1),t(G.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"items-per-page":12},scopedSlots:e._u([{key:"item.state",fn:function({item:a}){return[t(K.Z,{attrs:{color:"green"},on:{click:function(t){return e.driverEnabledChanged(a)}},model:{value:a.state,callback:function(t){e.$set(a,"state",t)},expression:"item.state"}})]}},{key:"item.actions",fn:function({item:a}){return[t(m.Z,{attrs:{icon:""},on:{click:function(t){return e.moreInfo(a)}}},[t(o.Z,{attrs:{color:"blue"}},[e._v("search")])],1),t(m.Z,{attrs:{icon:""},on:{click:function(t){return e.editUser(a)}}},[t(o.Z,{attrs:{color:"green"}},[e._v("edit")])],1),t(m.Z,{attrs:{icon:""},on:{click:function(t){return e.deleteUser(a)}}},[t(o.Z,{attrs:{color:"red"}},[e._v("delete")])],1)]}}],null,!0)})],1)],1)},Q=[],V=(a(7658),a(8945));class W{constructor(){this.url="",this.apiRoute="/api",this.route=this.url+this.apiRoute}async fetchUsers(){const e=this.route+"/fetch-users";try{const{data:{users:t}}=await V.Z.get(e);return t}catch(t){throw new Error(t)}}async fetchTravels(){const e=this.route+"/fetch-travels";try{const{data:{travels:t}}=await V.Z.get(e);return t}catch(t){throw new Error(t)}}async updateUser({id:e,email:t,role:a,name:n,surname:s,address:r,state:i}){const o=this.route+"/update-user";try{const{data:{user:l}}=await V.Z.post(o,{id:e,email:t,role:a,name:n,surname:s,address:r,state:i});return l}catch(l){throw new Error(l)}}}var X=new W,Y={name:"UserManagement-Page",data(){return{updateUsersLoading:!1,usersToUpdate:[],loadingCard:!1,headers:[{text:"Email",value:"email",align:"center"},{text:"Role",value:"role",align:"center"},{text:"Nombre",value:"name",align:"center"},{text:"Apellido",value:"surname",align:"center"},{text:"Dirección",value:"address",align:"center"},{text:"Conductor habilitado",value:"state",align:"center"},{text:"Acciones",value:"actions",align:"center"}],items:[]}},async mounted(){this.loadingCard=!0;try{const e=await X.fetchUsers();e.forEach((e=>{this.items.push({id:e._id,email:e.email?e.email:"",role:e.role?e.role:"",name:"CLIENT"==e.role?e.clientDetails.name:e.driverDetails.name,surname:"CLIENT"==e.role?e.clientDetails.surname:e.driverDetails.surname,address:"CLIENT"==e.role?e.clientDetails.address:e.driverDetails.address,state:!!e.driverEnabled&&e.driverEnabled,details:"CLIENT "==e.role?e.clientDetails:e.driverDetails})}))}catch(e){console.log("error: ",e)}this.loadingCard=!1},methods:{async updateUsers(){this.updateUsersLoading=!0;for(let e=0;e<this.usersToUpdate.length;e++){const{id:t,email:a,role:n,name:s,surname:r,address:i,state:o}=this.usersToUpdate[e];await X.updateUser({id:t,email:a,role:n,name:s,surname:r,address:i,state:o})}this.existUser=!1,this.usersToUpdate=[],this.updateUsersLoading=!1},driverEnabledChanged({id:e,email:t,role:a,name:n,surname:s,address:r,state:i}){let o=!1;this.usersToUpdate.forEach((async(l,c)=>{l.id===e&&(this.usersToUpdate[c]={id:e,email:t,role:a,name:n,surname:s,address:r,state:i},o=!0)})),o||this.usersToUpdate.push({id:e,email:t,role:a,name:n,surname:s,address:r,state:i})},editUser(){},deleteUser(){}}},ee=Y,te=(0,w.Z)(ee,H,Q,!1,null,null,null),ae=te.exports,ne=function(){var e=this,t=e._self._c;return t(z.Z,{staticClass:"py-8"},[t($.Z,{attrs:{loading:e.loadingCard}},[t(J.Z,[t(R.Z,{attrs:{cols:"6"}},[t(F.EB,[e._v("Administración de viajes")])],1)],1),t(G.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"items-per-page":5},scopedSlots:e._u([{key:"item.origin",fn:function({item:a}){return[t(m.Z,{attrs:{block:"",color:"primary"},on:{click:function(t){return e.OpenOriginDetails(a.origin)}}},[t(o.Z,{attrs:{left:""}},[e._v("add")]),e._v(" info ")],1)]}},{key:"item.destinations",fn:function({item:a}){return[t(m.Z,{attrs:{block:"",color:"primary"},on:{click:function(t){return e.OpenDestinationsDetails(a.destinations)}}},[t(o.Z,{attrs:{left:""}},[e._v("add")]),e._v(" info ")],1)]}}],null,!0)})],1),t("origin-details",{attrs:{origin:e.originSelectionedDetails},model:{value:e.originDetails,callback:function(t){e.originDetails=t},expression:"originDetails"}}),t("destinations-details",{attrs:{destinations:e.desinationsSelectedDetails},model:{value:e.destinationsDetails,callback:function(t){e.destinationsDetails=t},expression:"destinationsDetails"}})],1)},se=[],re=a(9789),ie=a(4192),oe=function(){var e=this,t=e._self._c;return t(re.Z,{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t($.Z,{attrs:{outlined:""}},[t(F.EB,[e._v("Detalles del Origen")]),t(F.ZB,[t(ie.Z),t(o.Z,{attrs:{left:""}},[e._v("home")]),e._v(" Dirección: "+e._s(e.origin.address)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("stairs")]),e._v(" Piso: "+e._s(e.origin.floor)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("comment")]),e._v(" Mensaje Opcional: "+e._s(e.origin.optionalMessage)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("contact_mail")]),e._v(" Contacto: "+e._s(e.origin.contact)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("contact_phone")]),e._v(" Telefono celular: "+e._s(e.origin.phone)+" "),t("br")],1),t(ie.Z),t(F.h7,[t(m.Z,{attrs:{block:"",color:"primary"},on:{click:function(t){e.dialog=!e.dialog}}},[e._v(" Aceptar ")])],1)],1)],1)},le=[],ce={name:"OriginDetails",props:{value:{type:Boolean,required:!0},origin:{type:Object,required:!0}},computed:{dialog:{get(){return this.value},set(e){this.$emit("input",e)}}}},ue=ce,de=(0,w.Z)(ue,oe,le,!1,null,null,null),me=de.exports,pe=function(){var e=this,t=e._self._c;return t(re.Z,{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t($.Z,{attrs:{outlined:""}},[t(F.EB,[e._v("Detalles del Origen")]),t(F.ZB,[t(ie.Z),t(h.Z,e._l(e.destinations,(function(a,n){return t(p.Z,{key:n},[t(v.Z,[e._v("Destino "+e._s(n+1))]),t(f.Z,[t(o.Z,{attrs:{left:""}},[e._v("home")]),e._v(" Dirección: "+e._s(a.address)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("stairs")]),e._v(" Piso: "+e._s(a.floor)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("comment")]),e._v(" Mensaje Opcional: "+e._s(a.optionalMessage)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("contact_mail")]),e._v(" Contacto: "+e._s(a.contact)+" "),t("br"),t(o.Z,{attrs:{left:""}},[e._v("contact_phone")]),e._v(" Telefono celular: "+e._s(a.phone)+" "),t("br")],1)],1)})),1)],1),t(ie.Z),t(F.h7,[t(m.Z,{attrs:{block:"",color:"primary"},on:{click:function(t){e.dialog=!e.dialog}}},[e._v(" Aceptar ")])],1)],1)],1)},fe=[],ve={name:"OriginDetails",props:{value:{type:Boolean,required:!0},destinations:{type:Array,required:!0}},computed:{dialog:{get(){return this.value},set(e){this.$emit("input",e)}}}},he=ve,ge=(0,w.Z)(he,pe,fe,!1,null,null,null),Ze=ge.exports,_e={name:"UserManagement-Page",components:{OriginDetails:me,DestinationsDetails:Ze},data(){return{destinationsDetails:!1,desinationsSelectedDetails:[],originDetails:!1,originSelectionedDetails:{},updateUsersLoading:!1,usersToUpdate:[],loadingCard:!1,headers:[{text:"Cliente",value:"designedClient",align:"center"},{text:"Conductor",value:"designedDriver",align:"center"},{text:"Origen",value:"origin",align:"center"},{text:"Destinos",value:"destinations",align:"center"},{text:"Metodo de pago",value:"methodOfPay",align:"center"},{text:"Tipo de vehículo",value:"vehicle",align:"center"},{text:"Estado",value:"status",align:"center"}],items:[]}},async mounted(){this.loadingCard=!0;try{const e=await X.fetchTravels();console.log("travels: ",e),this.items=e.map((e=>e))}catch(e){console.log("error: ",e)}this.loadingCard=!1},methods:{async OpenDestinationsDetails(e){this.desinationsSelectedDetails=e,this.destinationsDetails=!0},async OpenOriginDetails(e){this.originSelectionedDetails=e,this.originDetails=!0},async updateUsers(){this.updateUsersLoading=!0;for(let e=0;e<this.usersToUpdate.length;e++){const{id:t,email:a,role:n,name:s,surname:r,address:i,state:o}=this.usersToUpdate[e];await X.updateUser({id:t,email:a,role:n,name:s,surname:r,address:i,state:o})}this.existUser=!1,this.usersToUpdate=[],this.updateUsersLoading=!1},driverEnabledChanged({id:e,email:t,role:a,name:n,surname:s,address:r,state:i}){let o=!1;this.usersToUpdate.forEach((async(l,c)=>{l.id===e&&(this.usersToUpdate[c]={id:e,email:t,role:a,name:n,surname:s,address:r,state:i},o=!0)})),o||this.usersToUpdate.push({id:e,email:t,role:a,name:n,surname:s,address:r,state:i})},editUser(){},deleteUser(){}}},ye=_e,be=(0,w.Z)(ye,ne,se,!1,null,null,null),De=be.exports;n.ZP.use(M.ZP);const we=[{path:"/",name:"home",component:q},{path:"/user-management",name:"userManagement",component:ae},{path:"/travel-management",name:"travel-management",component:De}],ke=new M.ZP({mode:"history",base:"/",routes:we});var xe=ke,Oe=a(2250);n.ZP.use(Oe.Z);var Ue=new Oe.Z({}),Ce=a(629);n.ZP.use(Ce.ZP);var Te=new Ce.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}});n.ZP.config.productionTip=!1,new n.ZP({i18n:P,router:xe,vuetify:Ue,store:Te,render:e=>e(T)}).$mount("#app")},2484:function(){},2796:function(e,t,a){var n={"./es.json":8563};function s(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id=2796},8563:function(e){"use strict";e.exports=JSON.parse('{"message":"hello i18n !!"}')}},t={};function a(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,s,r){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],s=e[u][1],r=e[u][2];for(var o=!0,l=0;l<n.length;l++)(!1&r||i>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(o=!1,r<i&&(i=r));if(o){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,s,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,r,i=n[0],o=n[1],l=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(l)var u=l(a)}for(t&&t(n);c<i.length;c++)r=i[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(1364)}));n=a.O(n)})();
//# sourceMappingURL=app.11ed2b13.js.map