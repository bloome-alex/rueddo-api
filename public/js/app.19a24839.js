(function(){var e={1162:function(e,t,r){"use strict";var n=r(144),a=r(1096),s=r(677),i=r(8983),o=r(5057),u=r(3551),l=r(5234),c=function(){var e=this,t=e._self._c;return t(a.Z,[t(s.Z,{attrs:{app:"",color:"primary",dark:"","clipped-left":""}},[t(i.Z,{on:{click:function(t){e.menuDrawerState=!0}}}),t(l.Z),t("b",{staticClass:"text-h4"},[e._v("BACKOFFICE")]),t(l.Z),t(o.Z,[e._v("person")])],1),t(u.Z,[t("router-view")],1),t("menu-drawer",{attrs:{value:e.menuDrawerState},on:{"set-drawer":e.setMenuDrawerState}})],1)},d=[],m=r(1828),f=r(8714),h=r(6487),p=r(1911),v=r(1133),g=r(9632),Z=r(9042),w=function(){var e=this,t=e._self._c;return t(g.Z,{directives:[{def:Z.Z,name:"click-outside",rawName:"v-click-outside",value:e.clickOutside,expression:"clickOutside"}],staticClass:"py-4",attrs:{app:"",left:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t(v.Z,[t(f.Z,[t(m.Z,{staticClass:"button-text",attrs:{width:"100%",plain:"",to:"/"}},[e._v("Inicio")]),t(p.Z,[e._v("Administraci贸n")]),t(h.Z,[t(m.Z,{staticClass:"button-text",attrs:{width:"100%",plain:"",to:"user-management"}},[e._v("Administraci贸n de usuarios")])],1)],1)],1)],1)},b=[],y={name:"MenuDrawer",data(){return{clickOutsideState:!0}},props:{value:{type:Boolean,required:!0}},computed:{drawer:{get(){return this.value},set(e){this.$emit("set-drawer",e)}}},methods:{clickOutside(){this.clickOutsideState=!this.clickOutsideState,this.clickOutsideState&&this.drawer&&(this.clickOutsideState=!0,this.drawer=!1)}}},k=y,_=r(1001),O=(0,_.Z)(k,w,b,!1,null,"6a116998",null),x=O.exports,U={name:"App",components:{MenuDrawer:x},data(){return{menuDrawerState:!1}},methods:{setMenuDrawerState(e){this.menuDrawerState=e}}},C=U,E=(0,_.Z)(C,c,d,!1,null,null,null),D=E.exports,S=r(7152);function T(){const e=r(6406),t={};return e.keys().forEach((r=>{const n=r.match(/([A-Za-z0-9-_]+)\./i);if(n&&n.length>1){const a=n[1];t[a]=e(r)}})),t}n.ZP.use(S.Z);var P=new S.Z({locale:"es",fallbackLocale:"es",messages:T()}),j=r(8345),L=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",[e._v("home")])},M=[],N=r(2484),A=r.n(N),I=A(),B=(0,_.Z)(I,L,M,!1,null,null,null),F=B.exports,R=r(3058),$=r(5223),q=r(4437),z=r(6035),G=r(1718),J=r(5294),K=r(4470),H=function(){var e=this,t=e._self._c;return t(z.Z,{staticClass:"py-8"},[t(R.Z,{attrs:{loading:e.loadingCard}},[t(J.Z,[t(q.Z,{attrs:{cols:"6"}},[t($.EB,[e._v("Administraci贸n de usuarios")])],1),t(q.Z,{attrs:{offset:"3",cols:"3"}},[t($.EB,[t(m.Z,{attrs:{color:"success",loading:e.updateUsersLoading},on:{click:e.updateUsers}},[e._v("Guardar cambios")])],1)],1)],1),t(G.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"items-per-page":12},scopedSlots:e._u([{key:"item.state",fn:function({item:r}){return[t(K.Z,{attrs:{color:"green"},on:{click:function(t){return e.driverEnabledChanged(r)}},model:{value:r.state,callback:function(t){e.$set(r,"state",t)},expression:"item.state"}})]}},{key:"item.actions",fn:function({item:r}){return[t(m.Z,{attrs:{icon:""},on:{click:function(t){return e.moreInfo(r)}}},[t(o.Z,{attrs:{color:"blue"}},[e._v("search")])],1),t(m.Z,{attrs:{icon:""},on:{click:function(t){return e.editUser(r)}}},[t(o.Z,{attrs:{color:"green"}},[e._v("edit")])],1),t(m.Z,{attrs:{icon:""},on:{click:function(t){return e.deleteUser(r)}}},[t(o.Z,{attrs:{color:"red"}},[e._v("delete")])],1)]}}],null,!0)})],1)],1)},Q=[],V=(r(7658),r(8945));class W{constructor(){this.url="http://localhost:7000",this.apiRoute="/api",this.route=this.url+this.apiRoute}async fetchUsers(){console.log("llego");const e=this.route+"/fetch-users";try{const{data:{users:t}}=await V.Z.get(e);return t}catch(t){throw new Error(t)}}async updateUser({id:e,email:t,role:r,name:n,surname:a,address:s,state:i}){const o=this.route+"/update-user";try{const{data:{user:u}}=await V.Z.post(o,{id:e,email:t,role:r,name:n,surname:a,address:s,state:i});return u}catch(u){throw new Error(u)}}}var X=new W,Y={name:"UserManagement-Page",data(){return{updateUsersLoading:!1,usersToUpdate:[],loadingCard:!1,headers:[{text:"Email",value:"email",align:"center"},{text:"Role",value:"role",align:"center"},{text:"Nombre",value:"name",align:"center"},{text:"Apellido",value:"surname",align:"center"},{text:"Direcci贸n",value:"address",align:"center"},{text:"Conductor habilitado",value:"state",align:"center"},{text:"Acciones",value:"actions",align:"center"}],items:[]}},async mounted(){this.loadingCard=!0;try{const e=await X.fetchUsers();e.forEach((e=>{this.items.push({id:e._id,email:e.email?e.email:"",role:e.role?e.role:"",name:"CLIENT"==e.role?e.clientDetails.name:e.driverDetails.name,surname:"CLIENT"==e.role?e.clientDetails.surname:e.driverDetails.surname,address:"CLIENT"==e.role?e.clientDetails.address:e.driverDetails.address,state:!!e.driverEnabled&&e.driverEnabled,details:"CLIENT "==e.role?e.clientDetails:e.driverDetails})}))}catch(e){console.log("error: ",e)}this.loadingCard=!1},methods:{async updateUsers(){this.updateUsersLoading=!0;for(let e=0;e<this.usersToUpdate.length;e++){const{id:t,email:r,role:n,name:a,surname:s,address:i,state:o}=this.usersToUpdate[e];await X.updateUser({id:t,email:r,role:n,name:a,surname:s,address:i,state:o})}this.existUser=!1,this.usersToUpdate=[],this.updateUsersLoading=!1},driverEnabledChanged({id:e,email:t,role:r,name:n,surname:a,address:s,state:i}){let o=!1;this.usersToUpdate.forEach((async(u,l)=>{u.id===e&&(this.usersToUpdate[l]={id:e,email:t,role:r,name:n,surname:a,address:s,state:i},o=!0)})),o||this.usersToUpdate.push({id:e,email:t,role:r,name:n,surname:a,address:s,state:i})},editUser(){},deleteUser(){}}},ee=Y,te=(0,_.Z)(ee,H,Q,!1,null,null,null),re=te.exports;n.ZP.use(j.ZP);const ne=[{path:"/",name:"home",component:F},{path:"/user-management",name:"userManagement",component:re}],ae=new j.ZP({mode:"history",base:"/",routes:ne});var se=ae,ie=r(2250);n.ZP.use(ie.Z);var oe=new ie.Z({}),ue=r(629);n.ZP.use(ue.ZP);var le=new ue.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}});n.ZP.config.productionTip=!1,new n.ZP({i18n:P,router:se,vuetify:oe,store:le,render:e=>e(D)}).$mount("#app")},2484:function(){},6406:function(e,t,r){var n={"./es.json":8563};function a(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id=6406},8563:function(e){"use strict";e.exports=JSON.parse('{"message":"hello i18n !!"}')}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.m=e,function(){var e=[];r.O=function(t,n,a,s){if(!n){var i=1/0;for(c=0;c<e.length;c++){n=e[c][0],a=e[c][1],s=e[c][2];for(var o=!0,u=0;u<n.length;u++)(!1&s||i>=s)&&Object.keys(r.O).every((function(e){return r.O[e](n[u])}))?n.splice(u--,1):(o=!1,s<i&&(i=s));if(o){e.splice(c--,1);var l=a();void 0!==l&&(t=l)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,a,s]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,s,i=n[0],o=n[1],u=n[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(a in o)r.o(o,a)&&(r.m[a]=o[a]);if(u)var c=u(r)}for(t&&t(n);l<i.length;l++)s=i[l],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(c)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(1162)}));n=r.O(n)})();
//# sourceMappingURL=app.19a24839.js.map